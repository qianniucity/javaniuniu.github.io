I"İ5<h2 id="é¢˜ç›®-æ°´å£¶é—®é¢˜">é¢˜ç›® <a href="https://leetcode-cn.com/problems/water-and-jug-problem/">æ°´å£¶é—®é¢˜</a></h2>
<p>æœ‰ä¸¤ä¸ªå®¹é‡åˆ†åˆ«ä¸º xå‡ å’Œ yå‡ çš„æ°´å£¶ä»¥åŠæ— é™å¤šçš„æ°´ã€‚è¯·åˆ¤æ–­èƒ½å¦é€šè¿‡ä½¿ç”¨è¿™ä¸¤ä¸ªæ°´å£¶ï¼Œä»è€Œå¯ä»¥å¾—åˆ°æ°å¥½ zå‡ çš„æ°´ï¼Ÿ</p>

<p>å¦‚æœå¯ä»¥ï¼Œæœ€åè¯·ç”¨ä»¥ä¸Šæ°´å£¶ä¸­çš„ä¸€æˆ–ä¸¤ä¸ªæ¥ç››æ”¾å–å¾—çš„ zå‡ æ°´ã€‚</p>

<p>ä½ å…è®¸ï¼š</p>

<ul>
  <li>è£…æ»¡ä»»æ„ä¸€ä¸ªæ°´å£¶</li>
  <li>æ¸…ç©ºä»»æ„ä¸€ä¸ªæ°´å£¶</li>
  <li>ä»ä¸€ä¸ªæ°´å£¶å‘å¦å¤–ä¸€ä¸ªæ°´å£¶å€’æ°´ï¼Œç›´åˆ°è£…æ»¡æˆ–è€…å€’ç©º</li>
</ul>

<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<h3 id="ç¤ºä¾‹-1-from-the-famous-die-hard-example">ç¤ºä¾‹ 1: (From the famous â€œDie Hardâ€ example)</h3>

<p>è¾“å…¥: x = 3, y = 5, z = 4 <br />
è¾“å‡º: True</p>
<h3 id="ç¤ºä¾‹-2">ç¤ºä¾‹ 2:</h3>

<p>è¾“å…¥: x = 2, y = 6, z = 5 <br />
è¾“å‡º: False</p>

<h2 id="è‡ªå·±çš„æ€è·¯">è‡ªå·±çš„æ€è·¯</h2>
<ul>
  <li>æ‰¾åˆ°x,yçš„æœ€å¤§å…¬çº¦æ•°èƒ½å¦zè¢«æ•´é™¤</li>
</ul>

<h2 id="è‡ªå·±çš„ä»£ç ">è‡ªå·±çš„ä»£ç </h2>
<h3 id="java">java</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canMeasureWater</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">z</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">b1</span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">b2</span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">b3</span><span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">z</span><span class="o">==</span><span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">&lt;</span><span class="n">z</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">x</span><span class="o">==</span><span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">z</span><span class="o">==</span><span class="n">y</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">y</span><span class="o">%</span><span class="n">x</span><span class="o">!=</span><span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">c</span><span class="o">%</span><span class="n">x</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">z</span><span class="o">%</span><span class="n">x</span><span class="o">==</span><span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="python">python</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">canMeasureWater</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="s">"""
        :type x: int
        :type y: int
        :type z: int
        :rtype: bool
        """</span>
        <span class="k">if</span> <span class="n">z</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span><span class="n">x</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">y</span><span class="o">==</span><span class="n">z</span>
        <span class="k">while</span> <span class="n">y</span><span class="o">%</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">y</span><span class="p">,</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">%</span><span class="n">x</span>
        <span class="k">return</span> <span class="n">z</span><span class="o">%</span><span class="n">x</span><span class="o">==</span><span class="mi">0</span>
</code></pre></div></div>

<h3 id="ç”¨æ—¶">ç”¨æ—¶</h3>
<p>ä¸¤å°æ—¶</p>

<h2 id="å®˜æ–¹è§£é¢˜æ€è·¯">å®˜æ–¹è§£é¢˜æ€è·¯</h2>

<h5 id="æ€è·¯åŠç®—æ³•">æ€è·¯åŠç®—æ³•</h5>

<p>é¦–å…ˆå¯¹é¢˜ç›®è¿›è¡Œå»ºæ¨¡ã€‚è§‚å¯Ÿé¢˜ç›®å¯çŸ¥ï¼Œåœ¨ä»»æ„ä¸€ä¸ªæ—¶åˆ»ï¼Œæ­¤é—®é¢˜çš„çŠ¶æ€å¯ä»¥ç”±ä¸¤ä¸ªæ•°å­—å†³å®šï¼šX å£¶ä¸­çš„æ°´é‡ï¼Œä»¥åŠ Y å£¶ä¸­çš„æ°´é‡ã€‚</p>

<p>åœ¨ä»»æ„ä¸€ä¸ªæ—¶åˆ»ï¼Œæˆ‘ä»¬å¯ä»¥ä¸”ä»…å¯ä»¥é‡‡å–ä»¥ä¸‹å‡ ç§æ“ä½œï¼š</p>

<ul>
  <li>æŠŠ X å£¶çš„æ°´çŒè¿› Y å£¶ï¼Œç›´è‡³çŒæ»¡æˆ–å€’ç©ºï¼›</li>
  <li>æŠŠ Y å£¶çš„æ°´çŒè¿› X å£¶ï¼Œç›´è‡³çŒæ»¡æˆ–å€’ç©ºï¼›</li>
  <li>æŠŠ X å£¶çŒæ»¡ï¼›</li>
  <li>æŠŠ Y å£¶çŒæ»¡ï¼›</li>
  <li>æŠŠ X å£¶å€’ç©ºï¼›</li>
  <li>æŠŠ Y å£¶å€’ç©ºã€‚
å› æ­¤ï¼Œæœ¬é¢˜å¯ä»¥ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢æ¥è§£å†³ã€‚æœç´¢ä¸­çš„æ¯ä¸€æ­¥ä»¥ remain_x, remain_y ä½œä¸ºçŠ¶æ€ï¼Œå³è¡¨ç¤º X å£¶å’Œ Y å£¶ä¸­çš„æ°´é‡ã€‚åœ¨æ¯ä¸€æ­¥æœç´¢æ—¶ï¼Œæˆ‘ä»¬ä¼šä¾æ¬¡å°è¯•æ‰€æœ‰çš„æ“ä½œï¼Œé€’å½’åœ°æœç´¢ä¸‹å»ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬é™·å…¥æ— æ­¢å¢ƒçš„é€’å½’ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œç»“åˆï¼ˆHashSetï¼‰å­˜å‚¨æ‰€æœ‰å·²ç»æœç´¢è¿‡çš„ remain_x, remain_y çŠ¶æ€ï¼Œä¿è¯æ¯ä¸ªçŠ¶æ€è‡³å¤šåªè¢«æœç´¢ä¸€æ¬¡ã€‚</li>
</ul>

<p>åœ¨å®é™…çš„ä»£ç ç¼–å†™ä¸­ï¼Œç”±äºæ·±åº¦ä¼˜å…ˆæœç´¢å¯¼è‡´çš„é€’å½’è¿œè¿œè¶…è¿‡äº† Python çš„é»˜è®¤é€’å½’å±‚æ•°ï¼ˆå¯ä»¥ä½¿ç”¨ sys åº“æ›´æ”¹é€’å½’å±‚æ•°ï¼Œä½†ä¸æ¨èè¿™ä¹ˆåšï¼‰ï¼Œå› æ­¤ä¸‹é¢çš„ä»£ç ä½¿ç”¨æ ˆæ¥æ¨¡æ‹Ÿé€’å½’ï¼Œé¿å…äº†çœŸæ­£ä½¿ç”¨é€’å½’è€Œå¯¼è‡´çš„é—®é¢˜ã€‚</p>
<h2 id="å®˜æ–¹ä»£ç ">å®˜æ–¹ä»£ç </h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">canMeasureWater</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">stack</span><span class="p">:</span>
            <span class="n">remain_x</span><span class="p">,</span> <span class="n">remain_y</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">remain_x</span> <span class="o">==</span> <span class="n">z</span> <span class="ow">or</span> <span class="n">remain_y</span> <span class="o">==</span> <span class="n">z</span> <span class="ow">or</span> <span class="n">remain_x</span> <span class="o">+</span> <span class="n">remain_y</span> <span class="o">==</span> <span class="n">z</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">remain_x</span><span class="p">,</span> <span class="n">remain_y</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">seen</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">remain_x</span><span class="p">,</span> <span class="n">remain_y</span><span class="p">))</span>
            <span class="c1"># æŠŠ X å£¶çŒæ»¡ã€‚
</span>            <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">remain_y</span><span class="p">))</span>
            <span class="c1"># æŠŠ Y å£¶çŒæ»¡ã€‚
</span>            <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">remain_x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="c1"># æŠŠ X å£¶å€’ç©ºã€‚
</span>            <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">remain_y</span><span class="p">))</span>
            <span class="c1"># æŠŠ Y å£¶å€’ç©ºã€‚
</span>            <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">remain_x</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="c1"># æŠŠ X å£¶çš„æ°´çŒè¿› Y å£¶ï¼Œç›´è‡³çŒæ»¡æˆ–å€’ç©ºã€‚
</span>            <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">remain_x</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">remain_x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">remain_y</span><span class="p">),</span> <span class="n">remain_y</span> <span class="o">+</span> <span class="nb">min</span><span class="p">(</span><span class="n">remain_x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">remain_y</span><span class="p">)))</span>
            <span class="c1"># æŠŠ Y å£¶çš„æ°´çŒè¿› X å£¶ï¼Œç›´è‡³çŒæ»¡æˆ–å€’ç©ºã€‚
</span>            <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">remain_x</span> <span class="o">+</span> <span class="nb">min</span><span class="p">(</span><span class="n">remain_y</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">remain_x</span><span class="p">),</span> <span class="n">remain_y</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">remain_y</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">remain_x</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">False</span>
</code></pre></div></div>

<h2 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h2>
<ul>
  <li>æ—¶é—´å¤æ‚åº¦ï¼šO(\log(\min(x, y)))ï¼Œå–å†³äºè®¡ç®—æœ€å¤§å…¬çº¦æ•°æ‰€ä½¿ç”¨çš„è¾—è½¬ç›¸é™¤æ³•ã€‚</li>
  <li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œåªéœ€è¦å¸¸æ•°ä¸ªå˜é‡ã€‚</li>
</ul>
:ET