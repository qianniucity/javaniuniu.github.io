I"¶<ol>
  <li>
    <p>æ¦‚è¿°
åœ¨æ­¤æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Spring Cache åˆ›å»ºè‡ªå®šä¹‰å¯†é’¥ç”Ÿæˆå™¨ã€‚</p>
  </li>
  <li>
    <p>KeyGenerator
è¿™è´Ÿè´£ä¸ºç¼“å­˜ä¸­çš„æ¯ä¸ªæ•°æ®é¡¹ç”Ÿæˆæ¯ä¸ªé”®ï¼Œè¿™äº›é”®å°†ç”¨äºåœ¨æ£€ç´¢æ—¶æŸ¥æ‰¾æ•°æ®é¡¹ã€‚</p>
  </li>
</ol>

<p>æ­¤å¤„çš„é»˜è®¤å®ç°æ˜¯SimpleKeyGenerator â€“å®ƒä½¿ç”¨æä¾›çš„æ–¹æ³•å‚æ•°æ¥ç”Ÿæˆå¯†é’¥ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸¤ä¸ªä½¿ç”¨ç›¸åŒçš„ç¼“å­˜åç§°å’Œå‚æ•°ç±»å‹é›†çš„æ–¹æ³•ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´å†²çªã€‚</p>

<p>å®ƒè¿˜æ„å‘³ç€ç¼“å­˜æ•°æ®å¯ä»¥ç”±å¦ä¸€ç§æ–¹æ³•è¦†ç›–ã€‚</p>

<ol>
  <li>è‡ªå®šä¹‰å¯†é’¥ç”Ÿæˆå™¨
å¯†é’¥ç”Ÿæˆå™¨åªéœ€è¦å®ç°ä¸€ä¸ªæ–¹æ³•ï¼š</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Object</span> <span class="nf">generate</span><span class="o">(</span><span class="nc">Object</span> <span class="n">object</span><span class="o">,</span> <span class="nc">Method</span> <span class="n">method</span><span class="o">,</span> <span class="nc">Object</span><span class="o">...</span> <span class="n">params</span><span class="o">)</span>
</code></pre></div></div>
<p>å¦‚æœæœªæ­£ç¡®å®ç°æˆ–ä½¿ç”¨ï¼Œåˆ™å¯èƒ½å¯¼è‡´è¦†ç›–ç¼“å­˜æ•°æ®ã€‚</p>

<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ç°ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomKeyGenerator</span> <span class="kd">implements</span> <span class="nc">KeyGenerator</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">generate</span><span class="o">(</span><span class="nc">Object</span> <span class="n">target</span><span class="o">,</span> <span class="nc">Method</span> <span class="n">method</span><span class="o">,</span> <span class="nc">Object</span><span class="o">...</span> <span class="n">params</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">target</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getSimpleName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"_"</span>
          <span class="o">+</span> <span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"_"</span>
          <span class="o">+</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">arrayToDelimitedString</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="s">"_"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ä¹‹åï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å¯èƒ½çš„æ–¹å¼ä½¿ç”¨å®ƒ;ç¬¬ä¸€ç§æ˜¯åœ¨åº”ç”¨ç¨‹åºConfigä¸­å£°æ˜ä¸€ä¸ªè±†ã€‚</p>

<p>è¯·åŠ¡å¿…æŒ‡å‡ºï¼Œç±»å¿…é¡»ä»ç¼“å­˜é…ç½®æ”¯æŒæˆ–å®ç°ç¼“å­˜é…ç½®ç¨‹åºæ‰©å±•ï¼š</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@EnableCaching</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ApplicationConfig</span> <span class="kd">extends</span> <span class="nc">CachingConfigurerSupport</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">CacheManager</span> <span class="nf">cacheManager</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">SimpleCacheManager</span> <span class="n">cacheManager</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleCacheManager</span><span class="o">();</span>
        <span class="nc">Cache</span> <span class="n">booksCache</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConcurrentMapCache</span><span class="o">(</span><span class="s">"books"</span><span class="o">);</span>
        <span class="n">cacheManager</span><span class="o">.</span><span class="na">setCaches</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">booksCache</span><span class="o">));</span>
        <span class="k">return</span> <span class="n">cacheManager</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="s">"customKeyGenerator"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">KeyGenerator</span> <span class="nf">keyGenerator</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CustomKeyGenerator</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ç¬¬äºŒç§æ–¹æ³•æ˜¯å°†å…¶ç”¨äºç‰¹å®šæ–¹æ³•ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookService</span> <span class="o">{</span>

    <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"books"</span><span class="o">,</span> <span class="n">keyGenerator</span> <span class="o">=</span> <span class="s">"customKeyGenerator"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Book</span><span class="o">&gt;</span> <span class="nf">getBooks</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Book</span><span class="o">&gt;</span> <span class="n">books</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="n">books</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Book</span><span class="o">(</span><span class="s">"The Counterfeiters"</span><span class="o">,</span> <span class="s">"AndrÃ© Gide"</span><span class="o">));</span>
        <span class="n">books</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Book</span><span class="o">(</span><span class="s">"Peer Gynt and Hedda Gabler"</span><span class="o">,</span> <span class="s">"Henrik Ibsen"</span><span class="o">));</span>
        <span class="k">return</span> <span class="n">books</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<ol>
  <li>ç»“è®º
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†å®ç°è‡ªå®šä¹‰æ˜¥å­£ç¼“å­˜çš„å¯†é’¥ç”Ÿæˆå™¨çš„æ–¹æ³•ã€‚</li>
</ol>

<p>ä¸å¾€å¸¸ä¸€æ ·ï¼Œç¤ºä¾‹çš„å®Œæ•´æºä»£ç å¯åœ¨ GitHub ä¸Šæ‰¾åˆ°ã€‚</p>
:ET