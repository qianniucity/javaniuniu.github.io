I"ï<h4 id="åŸç†">åŸç†</h4>
<p>DynamicUpdate: åœ¨åªæ›´æ–°åŒä¸€ä¸ªsessioné‡Œé¢ï¼ŒåŒä¸€ä¸ªå¯¹è±¡æœ‰æ”¹å˜çš„å­—æ®µã€‚è¯´ç™½äº†, å°±æ˜¯åœ¨æ›´æ–°æŸæ¡è®°å½•ä¹‹å‰, å…ˆæŠŠè¿™æ¡è®°å½•ä»æ•°æ®åº“æŸ¥å‡ºæ¥, é‚£ä¹ˆè¿™æ¡æ•°æ®å°±åœ¨session(ä¸€çº§ç¼“å­˜)ä¸­, æˆ‘ä»¬å†å»ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„æ•°æ®å³å¯;</p>

<h4 id="dynamicupdateæ­£ç¡®ä½¿ç”¨æ–¹å¼">@DynamicUpdateæ­£ç¡®ä½¿ç”¨æ–¹å¼</h4>
<ol>
  <li>åœ¨åš updateå®ä½“ç±»çš„æŸä¸ªå±æ€§ä¹‹å‰ï¼Œå…ˆåšfindByIdæ“ä½œ</li>
  <li>å°†éœ€è¦ä¿®æ”¹çš„å­—æ®µåš set æ“ä½œ</li>
  <li>åš save æ“ä½œ</li>
</ol>

<h4 id="è¯¯åŒºåŠç»å¸¸å‡ºç°çš„é”™è¯¯">è¯¯åŒºåŠç»å¸¸å‡ºç°çš„é”™è¯¯</h4>
<ol>
  <li>æ›´æ–°æ•°æ®æ—¶ï¼Œåªä¼ å…¥éœ€è¦æ›´æ–°çš„æ•°æ®ï¼Œè€Œæ²¡æœ‰æ“ä½œfindByIdæ“ä½œ,é€ æˆå…¶ä»–æ•°æ®ä¸ºnull
2.</li>
</ol>

<h4 id="ä¸¾ä¾‹">ä¸¾ä¾‹</h4>
<p>å…ˆè¯´æ˜ä¸€ä¸‹@DynamicUpdateæ³¨è§£ç”¨åœ¨å®ä½“ç±»ä¸Š   <br />
æœ‰ æ•°æ®åº“ è¡¨tbl_fooå’Œå¯¹åº”çš„å®ä½“ç±»Fooï¼Œå¦‚ä¸‹ï¼š</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">id</th>
      <th style="text-align: left">name</th>
      <th style="text-align: left">col3</th>
      <th style="text-align: left">col4</th>
      <th style="text-align: left">col5</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">æ¯•åŠ ç´¢</td>
      <td style="text-align: left">1770</td>
      <td style="text-align: left">å¥¥åœ°åˆ©</td>
      <td style="text-align: left">ç”·</td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Foo</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">col3</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">col4</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">col5</span><span class="o">;</span>
    <span class="n">getter</span><span class="o">...</span>
    <span class="n">setter</span><span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>
<p>åœ¨Serviceä¸­æ›´æ–°id=1è®°å½•çš„nameå±æ€§ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Foo</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">fooDao</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="n">foo</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"è´å¤šèŠ¬"</span><span class="o">);</span>
<span class="n">fooDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">foo</span><span class="o">);</span>
</code></pre></div></div>

<p><strong>ä¸¤ç§æƒ…å†µï¼š</strong></p>
<ol>
  <li>åœ¨entityç±»ä¸­æœªä½¿ç”¨@DynamicUpdateæ³¨è§£æˆ–ä½¿ç”¨äº†@DynamicUpdate(false)ï¼Œé‚£ä¹ˆHibernateåº•å±‚æ‰§è¡Œçš„sqlå¦‚:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">update</span> <span class="n">tbl_foo</span> <span class="k">set</span> <span class="n">name</span><span class="o">=?</span><span class="p">,</span> <span class="n">col3</span><span class="o">=?</span><span class="p">,</span> <span class="n">col4</span><span class="o">=?</span><span class="p">,</span> <span class="n">col5</span><span class="o">=?</span> <span class="k">where</span> <span class="n">id</span><span class="o">=?</span>
</code></pre></div>    </div>
  </li>
  <li>åœ¨entityç±»ä¸­ä½¿ç”¨äº†@DynamicUpdateæ³¨è§£(æˆ–@DynamicUpdate(true))ï¼ŒHibernateåº•å±‚æ‰§è¡Œçš„sqlå¦‚:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">update</span> <span class="n">tbl_foo</span> <span class="k">set</span> <span class="n">name</span><span class="o">=?</span> <span class="k">where</span> <span class="n">id</span><span class="o">=?</span>
</code></pre></div>    </div>
    <p>ä»¥ä¸Šä¸¤ç§æƒ…å†µå¯¹æ•°æ®åº“æ›´æ–°çš„ç»“æœæ˜¯<code class="highlighter-rouge">ç­‰æ•ˆ</code>çš„ï¼Œä½†æ˜¯<code class="highlighter-rouge">ä½¿ç”¨@DynamicUpdateæ€§èƒ½ä¼šå¥½ä¸€äº›</code>ã€‚å› ä¸ºä¸ä½¿ç”¨@DynamicUpdateæ—¶ï¼Œå³ä½¿æ²¡æœ‰æ”¹å˜çš„å­—æ®µä¹Ÿä¼šè¢«æ›´æ–°ã€‚å¦‚æœè¿›è¡Œé¢‘ç¹çš„æ›´æ–°æ“ä½œï¼Œå¹¶ä¸”æ¯æ¬¡åªæ›´æ–°å°‘æ•°å­—æ®µï¼Œé‚£ä¹ˆ@DynamicUpdateå¯¹æ€§èƒ½çš„ä¼˜åŒ–æ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ã€‚</p>
  </li>
</ol>

<h4 id="è¯¯è§£">è¯¯è§£</h4>
:ET