I"š=<p>Spring AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥ç”¨æ¥é…ç½® <strong>äº‹åŠ¡</strong>ã€<strong>åšæ—¥å¿—</strong>ã€<strong>æƒé™éªŒè¯</strong>ã€åœ¨ç”¨æˆ·è¯·æ±‚æ—¶åšä¸€äº›å¤„ç†ç­‰ç­‰ã€‚ç”¨@Aspectåšä¸€ä¸ªåˆ‡é¢ï¼Œå°±å¯ä»¥ç›´æ¥å®ç°ã€‚</p>

<p>1.é¦–å…ˆå®šä¹‰ä¸€ä¸ªåˆ‡é¢ç±»ï¼ŒåŠ ä¸Š@Component  @Aspectè¿™ä¸¤ä¸ªæ³¨è§£</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="nd">@Aspect</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogAspect</span> <span class="o">{</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">LogAspect</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">ObjectMapper</span> <span class="no">OBJECT_MAPPER</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectMapper</span><span class="o">();</span>


<span class="o">}</span>
</code></pre></div></div>
<p>2.å®šä¹‰åˆ‡ç‚¹</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">POINT_CUT</span> <span class="o">=</span> <span class="s">"execution(public * com.xhx.springboot.controller.*.*(..))"</span><span class="o">;</span>

<span class="nd">@Pointcut</span><span class="o">(</span><span class="no">POINT_CUT</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">pointCut</span><span class="o">(){}</span>
</code></pre></div></div>
<p>åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­ï¼Œ.. ä¸¤ä¸ªç‚¹è¡¨æ˜å¤šä¸ªï¼Œ* ä»£è¡¨ä¸€ä¸ªï¼Œä¸Šé¢è¡¨è¾¾å¼ä»£è¡¨åˆ‡å…¥com.xhx.springboot.controlleråŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ–¹æ³•å‚æ•°ä¸é™ï¼Œè¿”å›ç±»å‹ä¸é™ã€‚å…¶ä¸­è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ä¸å†™ï¼Œä¸èƒ½ç”¨ *ï¼Œç¬¬ä¸€ä¸ª *ä»£è¡¨è¿”å›ç±»å‹ä¸é™ï¼Œç¬¬äºŒä¸ª *è¡¨ç¤ºæ‰€æœ‰ç±»ï¼Œç¬¬ä¸‰ä¸ª *è¡¨ç¤ºæ‰€æœ‰æ–¹æ³•ï¼Œ..ä¸¤ä¸ªç‚¹è¡¨ç¤ºæ–¹æ³•é‡Œçš„å‚æ•°ä¸é™ã€‚ç„¶åç”¨<code class="highlighter-rouge">@Pointcut</code>åˆ‡ç‚¹æ³¨è§£ï¼Œæƒ³åœ¨ä¸€ä¸ªç©ºæ–¹æ³•ä¸Šé¢ï¼Œä¸€ä¼šå„¿åœ¨Adviceé€šçŸ¥ä¸­ï¼Œç›´æ¥è°ƒç”¨è¿™ä¸ªç©ºæ–¹æ³•å°±è¡Œäº†ï¼Œä¹Ÿå¯ä»¥æŠŠåˆ‡ç‚¹è¡¨è¾¾å¼å¸è½½Adviceé€šçŸ¥ä¸­çš„ï¼Œå•ç‹¬å®šä¹‰å‡ºæ¥ä¸»è¦æ˜¯ä¸ºäº†å¥½ç®¡ç†ã€‚</p>

<p>3.Adviceï¼Œé€šçŸ¥å¢å¼ºï¼Œä¸»è¦åŒ…æ‹¬äº”ä¸ªæ³¨è§£ <strong>Before</strong>,<strong>After</strong>,<strong>AfterReturning</strong>,<strong>AfterThrowing</strong>,<strong>Around</strong>ï¼Œä¸‹é¢ä»£ç ä¸­å…³é”®åœ°æ–¹éƒ½æœ‰æ³¨é‡Šï¼Œæˆ‘éƒ½åˆ—å‡ºæ¥äº†ã€‚</p>

<p>@Before  åœ¨åˆ‡ç‚¹æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</p>

<p>@After  åœ¨åˆ‡ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œ</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@AfterReturning åˆ‡ç‚¹æ–¹æ³•è¿”å›åæ‰§è¡Œ
</code></pre></div></div>

<p>@AfterThrowing åˆ‡ç‚¹æ–¹æ³•æŠ›å¼‚å¸¸æ‰§è¡Œ</p>

<p>@Around å±äºç¯ç»•å¢å¼ºï¼Œèƒ½æ§åˆ¶åˆ‡ç‚¹æ‰§è¡Œå‰ï¼Œæ‰§è¡Œåï¼Œï¼Œç”¨è¿™ä¸ªæ³¨è§£åï¼Œç¨‹åºæŠ›å¼‚å¸¸ï¼Œä¼šå½±å“@AfterThrowingè¿™ä¸ªæ³¨è§£</p>

<p>package com.xhx.springboot.config;</p>

<p>import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.Signature;
import org.aspectj.lang.annotation.*;
import org.aspectj.lang.reflect.SourceLocation;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Component;
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.ServletRequestAttributes;</p>

<p>import javax.servlet.http.HttpServletRequest;
import java.util.Arrays;</p>

<p>@Component
@Aspect
public class LogAspect {</p>

<p>private static final Logger logger = LoggerFactory.getLogger(LogAspect.class);
private static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();</p>

<p>private final String POINT_CUT = â€œexecution(public * com.xhx.springboot.controller.<em>.</em>(..))â€;</p>

<p>@Pointcut(POINT_CUT)
public void pointCut(){}</p>

<p>@Before(value = â€œpointCut()â€)
public void before(JoinPoint joinPoint){
logger.info(â€œ@Beforeé€šçŸ¥æ‰§è¡Œâ€);
//è·å–ç›®æ ‡æ–¹æ³•å‚æ•°ä¿¡æ¯
Object[] args = joinPoint.getArgs();
Arrays.stream(args).forEach(arg-&gt;{ // å¤§å¤§
try {
logger.info(OBJECT_MAPPER.writeValueAsString(arg));
} catch (JsonProcessingException e) {
logger.info(arg.toString());
}
});</p>

<p>//aopä»£ç†å¯¹è±¡
Object aThis = joinPoint.getThis();
logger.info(aThis.toString()); //com.xhx.springboot.controller.HelloController@69fbbcdd</p>

<p>//è¢«ä»£ç†å¯¹è±¡
Object target = joinPoint.getTarget();
logger.info(target.toString()); //com.xhx.springboot.controller.HelloController@69fbbcdd</p>

<p>//è·å–è¿æ¥ç‚¹çš„æ–¹æ³•ç­¾åå¯¹è±¡
Signature signature = joinPoint.getSignature();
logger.info(signature.toLongString()); //public java.lang.String com.xhx.springboot.controller.HelloController.getName(java.lang.String)
logger.info(signature.toShortString()); //HelloController.getName(..)
logger.info(signature.toString()); //String com.xhx.springboot.controller.HelloController.getName(String)
//è·å–æ–¹æ³•å
logger.info(signature.getName()); //getName
//è·å–å£°æ˜ç±»å‹å
logger.info(signature.getDeclaringTypeName()); //com.xhx.springboot.controller.HelloController
//è·å–å£°æ˜ç±»å‹ æ–¹æ³•æ‰€åœ¨ç±»çš„classå¯¹è±¡
logger.info(signature.getDeclaringType().toString()); //class com.xhx.springboot.controller.HelloController
//å’ŒgetDeclaringTypeName()ä¸€æ ·
logger.info(signature.getDeclaringType().getName());//com.xhx.springboot.controller.HelloController</p>

<p>//è¿æ¥ç‚¹ç±»å‹
String kind = joinPoint.getKind();
logger.info(kind);//method-execution</p>

<p>//è¿”å›è¿æ¥ç‚¹æ–¹æ³•æ‰€åœ¨ç±»æ–‡ä»¶ä¸­çš„ä½ç½® æ‰“å°æŠ¥å¼‚å¸¸
SourceLocation sourceLocation = joinPoint.getSourceLocation();
logger.info(sourceLocation.toString());
//logger.info(sourceLocation.getFileName());
//logger.info(sourceLocation.getLine()+â€â€);
//logger.info(sourceLocation.getWithinType().toString()); //class com.xhx.springboot.controller.HelloController</p>

<p>///è¿”å›è¿æ¥ç‚¹é™æ€éƒ¨åˆ†
JoinPoint.StaticPart staticPart = joinPoint.getStaticPart();
logger.info(staticPart.toLongString()); //execution(public java.lang.String com.xhx.springboot.controller.HelloController.getName(java.lang.String))</p>

<p>//attributeså¯ä»¥è·å–requestä¿¡æ¯ sessionä¿¡æ¯ç­‰
ServletRequestAttributes attributes =
(ServletRequestAttributes) RequestContextHolder.getRequestAttributes();
HttpServletRequest request = attributes.getRequest();
logger.info(request.getRequestURL().toString()); //http://127.0.0.1:8080/hello/getName
logger.info(request.getRemoteAddr()); //127.0.0.1
logger.info(request.getMethod()); //GET</p>

<p>logger.info(â€œbeforeé€šçŸ¥æ‰§è¡Œç»“æŸâ€);
}</p>

<p>/**</p>
<ul>
  <li>åç½®è¿”å›</li>
  <li>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ºJoinPointï¼Œåˆ™ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¿”å›å€¼çš„ä¿¡æ¯</li>
  <li>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¸ºJoinPointï¼Œåˆ™ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºreturningä¸­å¯¹åº”çš„å‚æ•°</li>
  <li>returningï¼šé™å®šäº†åªæœ‰ç›®æ ‡æ–¹æ³•è¿”å›å€¼ä¸é€šçŸ¥æ–¹æ³•å‚æ•°ç±»å‹åŒ¹é…æ—¶æ‰èƒ½æ‰§è¡Œåç½®è¿”å›é€šçŸ¥ï¼Œå¦åˆ™ä¸æ‰§è¡Œï¼Œ</li>
  <li>å‚æ•°ä¸ºObjectç±»å‹å°†åŒ¹é…ä»»ä½•ç›®æ ‡è¿”å›å€¼
*/
@AfterReturning(value = POINT_CUT,returning = â€œresultâ€)
public void doAfterReturningAdvice1(JoinPoint joinPoint,Object result){
logger.info(â€œç¬¬ä¸€ä¸ªåç½®è¿”å›é€šçŸ¥çš„è¿”å›å€¼ï¼šâ€+result);
}</li>
</ul>

<p>@AfterReturning(value = POINT_CUT,returning = â€œresultâ€,argNames = â€œresultâ€)
public void doAfterReturningAdvice2(String result){
logger.info(â€œç¬¬äºŒä¸ªåç½®è¿”å›é€šçŸ¥çš„è¿”å›å€¼ï¼šâ€+result);
}
//ç¬¬ä¸€ä¸ªåç½®è¿”å›é€šçŸ¥çš„è¿”å›å€¼ï¼šå§“åæ˜¯å¤§å¤§
//ç¬¬äºŒä¸ªåç½®è¿”å›é€šçŸ¥çš„è¿”å›å€¼ï¼šå§“åæ˜¯å¤§å¤§
//ç¬¬ä¸€ä¸ªåç½®è¿”å›é€šçŸ¥çš„è¿”å›å€¼ï¼š{name=å°å°, id=1}</p>

<p>/**</p>
<ul>
  <li>åç½®å¼‚å¸¸é€šçŸ¥</li>
  <li>å®šä¹‰ä¸€ä¸ªåå­—ï¼Œè¯¥åå­—ç”¨äºåŒ¹é…é€šçŸ¥å®ç°æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°åï¼Œå½“ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸è¿”å›åï¼Œå°†æŠŠç›®æ ‡æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¼ ç»™é€šçŸ¥æ–¹æ³•ï¼›</li>
  <li>throwing:é™å®šäº†åªæœ‰ç›®æ ‡æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¸é€šçŸ¥æ–¹æ³•ç›¸åº”å‚æ•°å¼‚å¸¸ç±»å‹æ—¶æ‰èƒ½æ‰§è¡Œåç½®å¼‚å¸¸é€šçŸ¥ï¼Œå¦åˆ™ä¸æ‰§è¡Œï¼Œ</li>
  <li>å¯¹äºthrowingå¯¹åº”çš„é€šçŸ¥æ–¹æ³•å‚æ•°ä¸ºThrowableç±»å‹å°†åŒ¹é…ä»»ä½•å¼‚å¸¸ã€‚</li>
  <li>@param joinPoint</li>
  <li>@param exception
*/
@AfterThrowing(value = POINT_CUT,throwing = â€œexceptionâ€)
public void doAfterThrowingAdvice(JoinPoint joinPoint,Throwable exception){
logger.info(joinPoint.getSignature().getName());
if(exception instanceof NullPointerException){
logger.info(â€œå‘ç”Ÿäº†ç©ºæŒ‡é’ˆå¼‚å¸¸!!!!!â€);
}
}</li>
</ul>

<p>@After(value = POINT_CUT)
public void doAfterAdvice(JoinPoint joinPoint){
logger.info(â€œåç½®é€šçŸ¥æ‰§è¡Œäº†!â€);
}</p>

<p>/**</p>
<ul>
  <li>ç¯ç»•é€šçŸ¥ï¼š</li>
  <li>æ³¨æ„:Spring AOPçš„ç¯ç»•é€šçŸ¥ä¼šå½±å“åˆ°AfterThrowingé€šçŸ¥çš„è¿è¡Œ,ä¸è¦åŒæ—¶ä½¿ç”¨
*</li>
  <li>ç¯ç»•é€šçŸ¥éå¸¸å¼ºå¤§ï¼Œå¯ä»¥å†³å®šç›®æ ‡æ–¹æ³•æ˜¯å¦æ‰§è¡Œï¼Œä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œæ‰§è¡Œæ—¶æ˜¯å¦éœ€è¦æ›¿æ¢æ–¹æ³•å‚æ•°ï¼Œæ‰§è¡Œå®Œæ¯•æ˜¯å¦éœ€è¦æ›¿æ¢è¿”å›å€¼ã€‚</li>
  <li>ç¯ç»•é€šçŸ¥ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯org.aspectj.lang.ProceedingJoinPointç±»å‹
*/
@Around(value = POINT_CUT)
public Object doAroundAdvice(ProceedingJoinPoint proceedingJoinPoint){
logger.info(â€œ@Aroundç¯ç»•é€šçŸ¥ï¼šâ€+proceedingJoinPoint.getSignature().toString());
Object obj = null;
try {
obj = proceedingJoinPoint.proceed(); //å¯ä»¥åŠ å‚æ•°
logger.info(obj.toString());
} catch (Throwable throwable) {
throwable.printStackTrace();
}
logger.info(â€œ@Aroundç¯ç»•é€šçŸ¥æ‰§è¡Œç»“æŸâ€);
return obj;
}
}
      æ‰§è¡Œå‰åé¡ºåºæ˜¯è¿™æ ·</li>
</ul>

<dl>
  <dt>: @Aroundç¯ç»•é€šçŸ¥</dt>
  <dd>@Beforeé€šçŸ¥æ‰§è¡Œ</dd>
  <dd>@Beforeé€šçŸ¥æ‰§è¡Œç»“æŸ</dd>
  <dd>@Aroundç¯ç»•é€šçŸ¥æ‰§è¡Œç»“æŸ</dd>
  <dd>@Afteråç½®é€šçŸ¥æ‰§è¡Œäº†!</dd>
  <dd>@AfterReturningç¬¬ä¸€ä¸ªåç½®è¿”å›é€šçŸ¥çš„è¿”å›å€¼ï¼š18</dd>
</dl>

<p>org.aspectj.lang.JoinPoint ï¼š  æ–¹æ³•ä¸­çš„å‚æ•°JoinPointä¸ºè¿æ¥ç‚¹å¯¹è±¡ï¼Œå®ƒå¯ä»¥è·å–å½“å‰åˆ‡å…¥çš„æ–¹æ³•çš„å‚æ•°ã€ä»£ç†ç±»ç­‰ä¿¡æ¯ï¼Œå› æ­¤å¯ä»¥è®°å½•ä¸€äº›ä¿¡æ¯ï¼ŒéªŒè¯ä¸€äº›ä¿¡æ¯ç­‰ã€‚</p>

<p>org.aspectj.lang.ProceedingJoinPointï¼š ä¸ºJoinPointçš„å­ç±»ï¼Œå¤šäº†ä¸¤ä¸ªæ–¹æ³•</p>

<p>public Object proceed() throws Throwable; //è°ƒç”¨ä¸‹ä¸€ä¸ªadviceæˆ–è€…æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºç›®æ ‡æ–¹æ³•è¿”å›å€¼ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æ›´æ”¹è¿”å›å€¼ï¼Œä¿®æ”¹æ–¹æ³•çš„è¿”å›å€¼
public Object proceed(Object[] args) throws Throwable; //å‚æ•°ä¸ºç›®æ ‡æ–¹æ³•çš„å‚æ•° å› æ­¤å¯ä»¥é€šè¿‡ä¿®æ”¹å‚æ•°æ”¹å˜æ–¹æ³•å…¥å‚</p>

<p>å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼è·å–requestã€sessionç­‰å¯¹è±¡</p>

<p>//attributeså¯ä»¥è·å–requestä¿¡æ¯ sessionä¿¡æ¯ç­‰
ServletRequestAttributes attributes =
(ServletRequestAttributes) RequestContextHolder.getRequestAttributes();
HttpServletRequest request = attributes.getRequest();</p>

<p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹åˆ‡ç‚¹è¡¨è¾¾å¼ï¼š</p>

<p>1.execution(æ–¹æ³•ä¿®é¥°ç¬¦ è¿”å›ç±»å‹ æ–¹æ³•å…¨é™å®šå(å‚æ•°))         ä¸»è¦ç”¨æ¥åŒ¹é…æ•´ä¸ªæ–¹æ³•ç­¾åå’Œè¿”å›å€¼çš„</p>

<p>â€œexecution(public * com.xhx.springboot.controller.<em>.</em>(..))â€
    *åªèƒ½åŒ¹é…ä¸€çº§è·¯å¾„</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>..å¯ä»¥åŒ¹é…å¤šçº§ï¼Œå¯ä»¥æ˜¯åŒ…è·¯å¾„ï¼Œä¹Ÿå¯ä»¥åŒ¹é…å¤šä¸ªå‚æ•°

+ åªèƒ½æ”¾åœ¨ç±»åé¢ï¼Œè¡¨æ˜æœ¬ç±»åŠæ‰€æœ‰å­ç±»
</code></pre></div></div>

<p>è¿˜å¯ä»¥æŒ‰ä¸‹é¢è¿™ä¹ˆç©ï¼Œæ‰€æœ‰getå¼€å¤´çš„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Longç±»å‹çš„</p>

<p>@Pointcut(â€œexecution(* <em>..get</em>(Long,..))â€)</p>
<ol>
  <li>
    <p>within(ç±»è·¯å¾„)   ç”¨æ¥é™å®šç±»ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨åŒ¹é…ç¬¦</p>

    <p>ä¸‹é¢ç”¨æ¥è¡¨ç¤ºcom.xhx.springbootåŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç±»æ–¹æ³•</p>
  </li>
</ol>

<p>â€œwithin(com.xhx.springboot..*)â€</p>

<ol>
  <li>
    <p>thisä¸target</p>

    <p>thisä¸targetåœ¨ç”¨æ³•ä¸Šæœ‰äº›é‡åˆï¼Œç†è§£ä¸Šæœ‰å¯¹æ¯”æ€§ã€‚</p>

    <p>thisè¡¨ç¤ºå½“å‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ‰€æŒ‡ä»£çš„æ–¹æ³•çš„å¯¹è±¡çš„å®ä¾‹ï¼Œå³ä»£ç†å¯¹è±¡æ˜¯å¦æ»¡è¶³thisç±»å‹</p>

    <p>targetè¡¨ç¤ºå½“å‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ‰€æŒ‡ä»£çš„æ–¹æ³•çš„ç›®æ ‡å¯¹è±¡çš„å®ä¾‹   å³æ˜¯å¦æ˜¯ä¸ºtargetç±»åšçš„ä»£ç†</p>

    <p>å¦‚æœå½“å‰å¯¹è±¡ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ç¬¦åˆthisæŒ‡å®šçš„ç±»å‹ï¼Œåˆ™è¿›è¡Œåˆ‡é¢ï¼Œtargetæ˜¯åŒ¹é…ä¸šåŠ¡å¯¹è±¡ä¸ºæŒ‡å®šç±»å‹çš„ç±»ï¼Œåˆ™è¿›è¡Œåˆ‡é¢ã€‚</p>

    <p>ç”Ÿæˆä»£ç†å¯¹è±¡æ—¶ä¼šæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯CGLIBä¸€ä¸ªæ˜¯jdkåŠ¨æ€ä»£ç†ã€‚</p>

    <p>ç”¨ä¸‹é¢ä¸‰ä¸ªä¾‹å­è¿›è¡Œè¯´æ˜ï¼š</p>
  </li>
</ol>

<p>this(SomeInterface)æˆ–target(SomeInterface)ï¼šè¿™ç§æƒ…å†µä¸‹ï¼Œæ— è®ºæ˜¯å¯¹äºJdkä»£ç†è¿˜æ˜¯Cglibä»£ç†ï¼Œå…¶ç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½æ˜¯å®ç°SomeInterfaceæ¥å£çš„ï¼ˆCglibç”Ÿæˆçš„ç›®æ ‡å¯¹è±¡çš„å­ç±»ä¹Ÿæ˜¯å®ç°äº†SomeInterfaceæ¥å£çš„ï¼‰ï¼Œå› è€Œthiså’Œtargetè¯­ä¹‰éƒ½æ˜¯ç¬¦åˆçš„ï¼Œæ­¤æ—¶è¿™ä¸¤ä¸ªè¡¨è¾¾å¼çš„æ•ˆæœä¸€æ ·ï¼›
this(SomeObject)æˆ–target(SomeObject)ï¼Œè¿™é‡ŒSomeObjectæ²¡å®ç°ä»»ä½•æ¥å£ï¼šè¿™ç§æƒ…å†µä¸‹ï¼ŒSpringä¼šä½¿ç”¨Cglibä»£ç†ç”ŸæˆSomeObjectçš„ä»£ç†ç±»å¯¹è±¡ï¼Œç”±äºä»£ç†ç±»æ˜¯SomeObjectçš„å­ç±»ï¼Œå­ç±»çš„å¯¹è±¡ä¹Ÿæ˜¯ç¬¦åˆSomeObjectç±»å‹çš„ï¼Œå› è€Œthiså°†ä¼šè¢«åŒ¹é…ï¼Œè€Œå¯¹äºtargetï¼Œç”±äºç›®æ ‡å¯¹è±¡æœ¬èº«å°±æ˜¯SomeObjectç±»å‹ï¼Œå› è€Œè¿™ä¸¤ä¸ªè¡¨è¾¾å¼çš„æ•ˆæœä¸€æ ·ï¼›
this(SomeObject)æˆ–target(SomeObject)ï¼Œè¿™é‡ŒSomeObjectå®ç°äº†æŸä¸ªæ¥å£ï¼šå¯¹äºè¿™ç§æƒ…å†µï¼Œè™½ç„¶è¡¨è¾¾å¼ä¸­æŒ‡å®šçš„æ˜¯ä¸€ç§å…·ä½“çš„å¯¹è±¡ç±»å‹ï¼Œä½†ç”±äºå…¶å®ç°äº†æŸä¸ªæ¥å£ï¼Œå› è€ŒSpringé»˜è®¤ä¼šä½¿ç”¨Jdkä»£ç†ä¸ºå…¶ç”Ÿæˆä»£ç†å¯¹è±¡ï¼ŒJdkä»£ç†ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ä¸ç›®æ ‡å¯¹è±¡å®ç°çš„æ˜¯åŒä¸€ä¸ªæ¥å£ï¼Œä½†ä»£ç†å¯¹è±¡ä¸ç›®æ ‡å¯¹è±¡è¿˜æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œç”±äºä»£ç†å¯¹è±¡ä¸æ˜¯SomeObjectç±»å‹çš„ï¼Œå› è€Œæ­¤æ—¶æ˜¯ä¸ç¬¦åˆthisè¯­ä¹‰çš„ï¼Œè€Œç”±äºç›®æ ‡å¯¹è±¡å°±æ˜¯SomeObjectç±»å‹ï¼Œå› è€Œtargetè¯­ä¹‰æ˜¯ç¬¦åˆçš„ï¼Œæ­¤æ—¶thiså’Œtargetçš„æ•ˆæœå°±äº§ç”Ÿäº†åŒºåˆ«ï¼›è¿™é‡Œå¦‚æœå¼ºåˆ¶Springä½¿ç”¨Cglibä»£ç†ï¼Œå› è€Œç”Ÿæˆçš„ä»£ç†å¯¹è±¡éƒ½æ˜¯SomeObjectå­ç±»çš„å¯¹è±¡ï¼Œå…¶æ˜¯SomeObjectç±»å‹çš„ï¼Œå› è€Œthiså’Œtargetçš„è¯­ä¹‰éƒ½ç¬¦åˆï¼Œå…¶æ•ˆæœå°±æ˜¯ä¸€è‡´çš„ã€‚</p>

<p>4.args(paramType)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   argsæ— è®ºå…¶ç±»è·¯å¾„æˆ–è€…æ˜¯æ–¹æ³•åæ˜¯ä»€ä¹ˆ,è¡¨è¾¾å¼çš„ä½œç”¨æ˜¯åŒ¹é…æŒ‡å®šå‚æ•°ç±»å‹å’ŒæŒ‡å®šå‚æ•°æ•°é‡çš„æ–¹æ³•ï¼Œç±»å‹ç”¨å…¨è·¯å¾„     
</code></pre></div></div>

<p>args(java.lang.String,..,java.lang.Integer)
  5.@within(annotationType) åŒ¹é…å¸¦æœ‰æŒ‡å®šæ³¨è§£çš„ç±»ï¼Œï¼Œwithinä¸ºé…ç½®æŒ‡å®šç±»å‹çš„ç±»å®ä¾‹</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   ä¸‹é¢åŒ¹é…å«æœ‰ @Componentæ³¨è§£çš„ç±»
</code></pre></div></div>

<p>â€œ@within(org.springframework.stereotype.Component)â€
  6.@annotation(annotationType) åŒ¹é…å¸¦æœ‰æŒ‡å®šæ³¨è§£çš„æ–¹æ³•</p>

<p>7.@args(annotationType)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        @argsè¡¨ç¤ºä½¿ç”¨æŒ‡å®šæ³¨è§£æ ‡æ³¨çš„ç±»ä½œä¸ºæŸä¸ªæ–¹æ³•çš„å‚æ•°æ—¶è¯¥æ–¹æ³•å°†ä¼šè¢«åŒ¹é…
</code></pre></div></div>

<table>
  <tbody>
    <tr>
      <td>å¯ä»¥ä½¿ç”¨&amp;&amp;ã€</td>
      <td>Â </td>
      <td>ã€!ã€ä¸‰ç§è¿ç®—ç¬¦æ¥ç»„åˆåˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºä¸æˆ–éçš„å…³ç³»ã€‚</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>@Around(value = â€œpointcut1()</td>
      <td>Â </td>
      <td>pointcut2()â€)</td>
    </tr>
  </tbody>
</table>
:ET