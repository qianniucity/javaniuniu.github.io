I"Îk<p><a href="https://github.com/javaniuniu/springboot-buckets/tree/master/springboot-jpa">Githubæºç åœ°å€</a></p>

<h4 id="ä¸€å¥è¯ç®€ä»‹">ä¸€å¥è¯ç®€ä»‹</h4>
<p>Java Persistence APIå®šä¹‰äº†ä¸€ç§å®šä¹‰ï¼Œå¯ä»¥å°†å¸¸è§„çš„æ™®é€šJavaå¯¹è±¡ï¼ˆæœ‰æ—¶è¢«ç§°ä½œPOJOï¼‰æ˜ å°„åˆ°æ•°æ®åº“</p>

<h4 id="æ˜ å°„è§„åˆ™">æ˜ å°„è§„åˆ™ï¼š</h4>
<ol>
  <li>å®ä½“ç±»__å¿…é¡»__ç”¨ @javax.persistence.<strong>Entity</strong> è¿›è¡Œæ³¨è§£ï¼›</li>
  <li><strong>å¿…é¡»__ä½¿ç”¨ @javax.persistence.__Id</strong> æ¥æ³¨è§£ä¸€ä¸ªä¸»é”®ï¼›</li>
  <li>å®ä½“ç±»å¿…é¡»æ‹¥æœ‰ä¸€ä¸ª <strong>public æˆ–è€… protected</strong> çš„ <strong>æ— å‚</strong> æ„é€ å‡½æ•°ï¼Œä¹‹å¤–å®ä½“ç±»è¿˜å¯ä»¥æ‹¥æœ‰å…¶ä»–çš„æ„é€ å‡½æ•°ï¼›</li>
  <li>å®ä½“ç±»å¿…é¡»æ˜¯ä¸€ä¸ª <strong>é¡¶çº§ç±»</strong>ï¼ˆtop-level classï¼‰ã€‚ä¸€ä¸ªæšä¸¾ï¼ˆenumï¼‰æˆ–è€…ä¸€ä¸ªæ¥å£ï¼ˆinterfaceï¼‰ä¸èƒ½è¢«æ³¨è§£ä¸ºä¸€ä¸ªå®ä½“ï¼›</li>
  <li>å®ä½“ç±»ä¸èƒ½æ˜¯ <strong>final</strong> ç±»å‹çš„ï¼Œä¹Ÿ <strong>ä¸èƒ½æœ‰ final</strong> ç±»å‹çš„æ–¹æ³•ï¼›</li>
  <li>å¦‚æœå®ä½“ç±»çš„ä¸€ä¸ªå®ä¾‹éœ€è¦ç”¨ä¼ å€¼çš„æ–¹å¼è°ƒç”¨ï¼ˆä¾‹å¦‚ï¼Œè¿œç¨‹è°ƒç”¨ï¼‰ï¼Œåˆ™è¿™ä¸ªå®ä½“ç±»å¿…é¡»å®ç°ï¼ˆimplementsï¼‰java.io.Serializable æ¥å£ã€‚ <br />
ä¸ä¸@Tableç»“åˆçš„è¯ è¡¨å é»˜è®¤ä¸º SnakeCaseStrategy(å‘½åç­–ç•¥ )ä¸ºè¡¨å<br />
è‹¥ä½¿ç”¨ nameå±æ€§ ä¸”æ²¡æœ‰ä¸@Tableç»“åˆ åˆ™è¡¨åä¸º nameå€¼çš„SnakeCaseStrategy(å‘½åç­–ç•¥ )
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Entity  
public class UserEntity{...} è¡¨å user_entity  
@Entity(name="UE")  
public class UserEntity{...} è¡¨å ue  
@Entity(name="UsEntity")  
public class UserEntity{...} è¡¨å us_entity
</code></pre></div>    </div>
    <h4 id="æ˜ å°„è§„åˆ™å¯ä»¥é€šè¿‡ä½¿ç”¨-table-å’Œ-column-æ³¨è§£ä¿®æ”¹">æ˜ å°„è§„åˆ™å¯ä»¥é€šè¿‡ä½¿ç”¨ @Table å’Œ @Column æ³¨è§£ä¿®æ”¹</h4>
    <h5 id="table">@Table</h5>
    <ul>
      <li>@Tableæ³¨è§£çš„å¸¸ç”¨é€‰é¡¹æ˜¯ nameï¼Œç”¨äºæŒ‡æ˜æ•°æ®åº“çš„è¡¨å</li>
      <li>@Tableæ³¨è§£è¿˜æœ‰ä¸¤ä¸ªé€‰é¡¹ catalog å’Œ schema ç”¨äºè®¾ç½®è¡¨æ‰€å±çš„æ•°æ®åº“ç›®å½•æˆ–æ¨¡å¼ï¼Œé€šå¸¸ä¸ºæ•°æ®åº“å</li>
    </ul>
  </li>
</ol>

<h5 id="column">@Column</h5>
<p>@Columnæ³¨è§£ç”¨æ¥æ”¹å˜classä¸­å­—æ®µåä¸dbä¸­è¡¨çš„å­—æ®µåçš„æ˜ å°„è§„åˆ™</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Columnæ³¨é‡Šå®šä¹‰äº†å°†æˆå‘˜å±æ€§æ˜ å°„åˆ°å…³ç³»è¡¨ä¸­çš„å“ªä¸€åˆ—å’Œè¯¥åˆ—çš„ç»“æ„ä¿¡æ¯ï¼Œå±æ€§å¦‚ä¸‹ï¼š
ã€€ã€€1ï¼‰nameï¼šæ˜ å°„çš„åˆ—åã€‚å¦‚ï¼šæ˜ å°„tbl_userè¡¨çš„nameåˆ—ï¼Œå¯ä»¥åœ¨nameå±æ€§çš„ä¸Šé¢æˆ–getNameæ–¹æ³•ä¸Šé¢åŠ å…¥ï¼›
ã€€ã€€2ï¼‰uniqueï¼šæ˜¯å¦å”¯ä¸€ï¼›
ã€€ã€€3ï¼‰nullableï¼šæ˜¯å¦å…è®¸ä¸ºç©ºï¼›
ã€€ã€€4ï¼‰lengthï¼šå¯¹äºå­—ç¬¦å‹åˆ—ï¼Œlengthå±æ€§æŒ‡å®šåˆ—çš„æœ€å¤§å­—ç¬¦é•¿åº¦ï¼›
ã€€ã€€5ï¼‰insertableï¼šæ˜¯å¦å…è®¸æ’å…¥ï¼›
ã€€ã€€6ï¼‰updatetableï¼šæ˜¯å¦å…è®¸æ›´æ–°ï¼›
ã€€ã€€7ï¼‰columnDefinitionï¼šå®šä¹‰å»ºè¡¨æ—¶åˆ›å»ºæ­¤åˆ—çš„DDLï¼›
ã€€ã€€8ï¼‰secondaryTableï¼šä»è¡¨åã€‚å¦‚æœæ­¤åˆ—ä¸å»ºåœ¨ä¸»è¡¨ä¸Šï¼ˆé»˜è®¤æ˜¯ä¸»è¡¨ï¼‰ï¼Œè¯¥å±æ€§å®šä¹‰è¯¥åˆ—æ‰€åœ¨ä»è¡¨çš„åå­—
</code></pre></div></div>

<h4 id="hibernateä¸­entityå’Œtableçš„åŒºåˆ«">hibernateä¸­@Entityå’Œ@Tableçš„åŒºåˆ«ï¼š</h4>
<p>@Entityè¯´æ˜è¿™ä¸ªclassæ˜¯å®ä½“ç±»ï¼Œå¹¶ä¸”ä½¿ç”¨é»˜è®¤çš„ormè§„åˆ™ï¼Œå³classåå³æ•°æ®åº“è¡¨ä¸­è¡¨åï¼Œclasså­—æ®µåå³è¡¨ä¸­çš„å­—æ®µå
å¦‚æœæƒ³æ”¹å˜è¿™ç§é»˜è®¤çš„ormè§„åˆ™ï¼Œå°±è¦ä½¿ç”¨@Tableæ¥æ”¹å˜classåä¸æ•°æ®åº“ä¸­è¡¨åçš„æ˜ å°„è§„åˆ™ï¼Œ@Columnæ¥æ”¹å˜classä¸­å­—æ®µåä¸dbä¸­è¡¨çš„å­—æ®µåçš„æ˜ å°„è§„åˆ™</p>

<h4 id="mappedsuperclasså’Œentityçš„åŒºåˆ«">@MappedSuperclasså’Œ@Entityçš„åŒºåˆ«</h4>
<h5 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h5>
<p>æ•°æ®åº“è¡¨ä¸­éƒ½éœ€è¦idæ¥è¡¨ç¤ºç¼–å·ï¼Œidæ˜¯è¿™äº›æ˜ å°„å®ä½“ç±»çš„é€šç”¨çš„å±æ€§ï¼Œäº¤ç»™jpaç»Ÿä¸€ç”Ÿæˆä¸»é”®idç¼–å·ï¼Œé‚£ä¹ˆä½¿ç”¨ä¸€ä¸ªçˆ¶ç±»æ¥å°è£…è¿™äº›é€šç”¨å±æ€§ï¼Œå¹¶ç”¨@MappedSuperclasæ ‡è¯†ã€‚</p>

<h5 id="ç¤ºä¾‹">ç¤ºä¾‹</h5>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">IdEntity</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="nc">Integer</span> <span class="nf">getId</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">id</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@MappedSuperclass</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">BaseEntity</span> <span class="kd">extends</span> <span class="nc">IdEntity</span> <span class="o">{</span>

    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span><span class="o">=</span><span class="mi">20</span><span class="o">)</span>   
    <span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="nc">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"yyw_user"</span><span class="o">)</span>
<span class="nd">@Cache</span><span class="o">(</span><span class="n">usage</span><span class="o">=</span> <span class="n">org</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">annotations</span><span class="o">.</span><span class="na">CacheConcurrencyStrategy</span><span class="o">.</span><span class="na">READ_WRITE</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">extends</span> <span class="nc">BaseEntity</span> <span class="o">{</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span><span class="o">=</span><span class="mi">20</span><span class="o">,</span><span class="n">nullable</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span><span class="o">=</span><span class="mi">20</span><span class="o">,</span><span class="n">nullable</span><span class="o">=</span><span class="kc">true</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">User</span><span class="o">(){}</span>
    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">password</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPassword</span><span class="o">(</span><span class="nc">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"User [name="</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">", id="</span> <span class="o">+</span> <span class="n">id</span> <span class="o">+</span> <span class="s">", password="</span> <span class="o">+</span> <span class="n">password</span>
                <span class="o">+</span> <span class="s">"]"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"yyw_subjects"</span><span class="o">)</span>
<span class="nd">@Cache</span><span class="o">(</span><span class="n">usage</span><span class="o">=</span> <span class="n">org</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">annotations</span><span class="o">.</span><span class="na">CacheConcurrencyStrategy</span><span class="o">.</span><span class="na">READ_WRITE</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Subject</span> <span class="kd">extends</span> <span class="nc">BaseEntity</span> <span class="o">{</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span><span class="o">=</span><span class="mi">20</span><span class="o">,</span><span class="n">nullable</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Subject</span><span class="o">(){}</span>
    <span class="kd">public</span> <span class="nf">Subject</span><span class="o">(</span><span class="nc">String</span> <span class="n">content</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getContent</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">content</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setContent</span><span class="o">(</span><span class="nc">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Subject [id="</span> <span class="o">+</span> <span class="n">id</span> <span class="o">+</span> <span class="s">", content="</span> <span class="o">+</span> <span class="n">content</span> <span class="o">+</span> <span class="s">"]"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="æ³¨æ„">æ³¨æ„:</h5>
<ol>
  <li>æ ‡æ³¨ä¸º@MappedSuperclassçš„ç±»å°†ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å®ä½“ç±»ï¼Œä»–å°† <strong>ä¸ä¼šæ˜ å°„åˆ°æ•°æ®åº“è¡¨</strong>ï¼Œä½†æ˜¯ <strong>ä»–çš„å±æ€§éƒ½å°†æ˜ å°„åˆ°å…¶å­ç±»çš„æ•°æ®åº“å­—æ®µä¸­</strong>ã€‚</li>
  <li>æ ‡æ³¨ä¸º@MappedSuperclassçš„ç±» <strong>ä¸èƒ½å†æ ‡æ³¨@Entityæˆ–@Tableæ³¨è§£</strong>ï¼Œä¹Ÿ <strong>æ— éœ€å®ç°åºåˆ—åŒ–æ¥å£</strong>ã€‚</li>
</ol>

<h4 id="secondarytable-çš„ä½¿ç”¨">@SecondaryTable çš„ä½¿ç”¨</h4>
<p>å°†ä¸€ä¸ªå®ä½“ç±»æ˜ å°„åˆ°æ•°æ®åº“ <strong>ä¸¤å¼ æˆ–æ›´å¤šè¡¨</strong> ä¸­å‘¢è¡¨ä¸­</p>

<h5 id="ç¤ºä¾‹-1">ç¤ºä¾‹</h5>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
 <span class="nd">@SecondaryTables</span><span class="o">({</span>
    <span class="nd">@SecondaryTable</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Address"</span><span class="o">),</span>
    <span class="nd">@SecondaryTable</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Comments"</span><span class="o">)</span>
 <span class="o">})</span>
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Forum</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">table</span> <span class="o">=</span> <span class="s">"Address"</span><span class="o">,</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">100</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">street</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">table</span> <span class="o">=</span> <span class="s">"Address"</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">city</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">table</span> <span class="o">=</span> <span class="s">"Address"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">conutry</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">table</span> <span class="o">=</span> <span class="s">"Comments"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">table</span> <span class="o">=</span> <span class="s">"Comments"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="nc">Comments</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">table</span> <span class="o">=</span> <span class="s">"Comments"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">comments_length</span><span class="o">;</span>

    <span class="c1">// Getters and Setters</span>
 <span class="o">}</span>
</code></pre></div></div>

<h5 id="erå›¾">ERå›¾</h5>
<p><img src="/assets/images/java_code_design_data/280044-20161224100845886-614588432.jpg" alt="å›¾ç‰‡pic1" /></p>

<h4 id="å…¶ä»–æ³¨è§£">å…¶ä»–æ³¨è§£</h4>
<h5 id="manytoone-å¤šå¯¹ä¸€å•å‘ä¸äº§ç”Ÿä¸­é—´è¡¨ä½†å¯ä»¥ç”¨joincolumnname--æ¥æŒ‡å®šç”Ÿæˆå¤–é”®çš„åå­—å¤–é”®åœ¨å¤šçš„ä¸€æ–¹è¡¨ä¸­äº§ç”Ÿ">@ManyToOne ï¼ˆå¤šå¯¹ä¸€ï¼‰å•å‘ï¼šä¸äº§ç”Ÿä¸­é—´è¡¨ï¼Œä½†å¯ä»¥ç”¨@Joincolumnï¼ˆname=â€  â€œï¼‰æ¥æŒ‡å®šç”Ÿæˆå¤–é”®çš„åå­—ï¼Œå¤–é”®åœ¨å¤šçš„ä¸€æ–¹è¡¨ä¸­äº§ç”Ÿ</h5>
<h5 id="onetomany-ä¸€å¯¹å¤šå•å‘ä¼šäº§ç”Ÿä¸­é—´è¡¨æ­¤æ—¶å¯ä»¥ç”¨onetomany-joincolumnname-é¿å…äº§ç”Ÿä¸­é—´è¡¨å¹¶ä¸”æŒ‡å®šäº†å¤–é”®çš„åå­—åˆ«çœ‹joincolumnåœ¨ä¸€ä¸­å†™ç€ä½†å®ƒå­˜åœ¨åœ¨å¤šçš„é‚£ä¸ªè¡¨ä¸­é€šå¸¸é…åˆlist-ä¸€èµ·ä½¿ç”¨">@OneToMany ï¼ˆä¸€å¯¹å¤šï¼‰å•å‘ï¼šä¼šäº§ç”Ÿä¸­é—´è¡¨ï¼Œæ­¤æ—¶å¯ä»¥ç”¨@onetoMany @Joincolumnï¼ˆname=â€ â€œï¼‰é¿å…äº§ç”Ÿä¸­é—´è¡¨ï¼Œå¹¶ä¸”æŒ‡å®šäº†å¤–é”®çš„åå­—ï¼ˆåˆ«çœ‹@joincolumnåœ¨ä¸€ä¸­å†™ç€ï¼Œä½†å®ƒå­˜åœ¨åœ¨å¤šçš„é‚£ä¸ªè¡¨ä¸­,é€šå¸¸é…åˆList ä¸€èµ·ä½¿ç”¨ï¼‰</h5>
<h5 id="onetomanymanytooneåŒå‘ä¸¤ä¸ªæ³¨è§£ä¸€èµ·ç”¨çš„å¦‚æœä¸åœ¨onetomanyä¸­åŠ mappedyå±æ€§å°±ä¼šäº§ç”Ÿä¸­é—´è¡¨æ­¤æ—¶é€šå¸¸åœ¨manytooneçš„æ³¨è§£ä¸‹å†æ·»ä¸Šæ³¨è§£joincolumnname-æ¥æŒ‡å®šå¤–é”®çš„åå­—è¯´æ˜å¤šçš„ä¸€æ–¹ä¸ºå…³ç³»ç»´æŠ¤ç«¯å…³ç³»ç»´æŠ¤ç«¯è´Ÿè´£å¤–é”®è®°å½•çš„æ›´æ–°å…³ç³»è¢«ç»´æŠ¤ç«¯æ²¡æœ‰æƒåˆ©æ›´æ–°å¤–é”®è®°å½•onetomanymappedbyä¸€å¯¹å¤šä¸­å¤šä¸­ä¸€çš„å±æ€§å‡ºç°mapbyä¸ºè¢«ç»´æŠ¤ç«¯é»˜è®¤ä¸ºå»¶è¿ŸåŠ è½½">@OneToManyÂ ,@ManyToOneÂ åŒå‘ï¼ˆä¸¤ä¸ªæ³¨è§£ä¸€èµ·ç”¨çš„ï¼‰ï¼šå¦‚æœä¸åœ¨@OneToManyä¸­åŠ mappedyå±æ€§å°±ä¼šäº§ç”Ÿä¸­é—´è¡¨ï¼Œæ­¤æ—¶é€šå¸¸åœ¨@ManyToOneçš„æ³¨è§£ä¸‹å†æ·»ä¸Šæ³¨è§£@Joincolumn(name=â€ â€œ)æ¥æŒ‡å®šå¤–é”®çš„åå­—(è¯´æ˜ï¼šå¤šçš„ä¸€æ–¹ä¸ºå…³ç³»ç»´æŠ¤ç«¯ï¼Œå…³ç³»ç»´æŠ¤ç«¯è´Ÿè´£å¤–é”®è®°å½•çš„æ›´æ–°ï¼Œå…³ç³»è¢«ç»´æŠ¤ç«¯æ²¡æœ‰æƒåˆ©æ›´æ–°å¤–é”®è®°å½•)ï¼ï¼ˆ@OneToMany(mappedBy=â€ä¸€å¯¹å¤šä¸­ï¼Œå¤šä¸­ä¸€çš„å±æ€§â€)å‡ºç°mapbyä¸ºè¢«ç»´æŠ¤ç«¯|||é»˜è®¤ä¸ºå»¶è¿ŸåŠ è½½)</h5>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//ç”¨ä¾‹ï¼š</span>
<span class="nd">@ManyToOne</span><span class="o">(</span><span class="n">fetch</span><span class="o">=</span><span class="nc">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">)</span>
<span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"child_id"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">OrderChild</span> <span class="n">orderChild</span><span class="o">;</span>

<span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span><span class="o">=</span><span class="s">"orderChild"</span><span class="o">,</span><span class="n">fetch</span><span class="o">=</span><span class="nc">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">,</span><span class="n">cascade</span><span class="o">={</span><span class="nc">CascadeType</span><span class="o">.</span><span class="na">MERGE</span><span class="o">})</span>
<span class="nd">@NotFound</span><span class="o">(</span><span class="n">action</span><span class="o">=</span><span class="nc">NotFoundAction</span><span class="o">.</span><span class="na">IGNORE</span><span class="o">)</span><span class="c1">//ä»£è¡¨å¯ä»¥ä¸ºç©ºï¼Œå…è®¸ä¸ºnull</span>
<span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">OrderChildGoods</span><span class="o">&gt;</span> <span class="n">goodsList</span><span class="o">;</span>
<span class="c1">//hibernateä¸­@ManyToOneé»˜è®¤æ˜¯ç«‹å³åŠ è½½ï¼Œ@OneToManyé»˜è®¤æ˜¯æ‡’åŠ è½½</span>

<span class="c1">//ä½†æ˜¯å¦‚æœåŠ ä¸Šäº†@NotFoundä¹‹åè®¾ç½®çš„fetch=FetchType.LAZYæ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®@NotFoundåå˜ä¸ºäº†ç«‹å³åŠ è½½eager</span>
</code></pre></div></div>
<h5 id="joincolumn">@JoinColumn</h5>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ManyToOne</span> <span class="c1">//å¤šä¸ªå…¬å‘Šå¯¹äºä¸€ä¸ªç®¡ç†å‘˜</span>
<span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">columnDefinition</span><span class="o">=</span><span class="s">"BIGINT(20) NOT NULL COMMENT 'åˆ›å»ºç®¡ç†å‘˜ID'"</span><span class="o">)</span>
<span class="c1">//JoinColumn ä¸æ·»åŠ nameå±æ€§ï¼ŒæŒ‰ç…§ç”Ÿæˆæ•°æ®åº“å­—æ®µçš„è§„åˆ™_id æ•°æ®åº“ä¸­å­—æ®µ create_admin_id</span>
<span class="kd">private</span> <span class="nc">Admin</span> <span class="n">createAdmin</span><span class="o">;</span>
</code></pre></div></div>
<h5 id="lob-å¤§å¯¹è±¡å­˜å‚¨ç±»å‹">@Lob å¤§å¯¹è±¡å­˜å‚¨ç±»å‹</h5>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Lob</span>
<span class="nd">@Column</span><span class="o">(</span><span class="n">columnDefinition</span> <span class="o">=</span> <span class="s">"TEXT COMMENT 'å•†å“æè¿°'"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">note</span><span class="o">;</span>
<span class="c1">//`note` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL COMMENT 'å•†å“æè¿°',</span>
</code></pre></div></div>
<h5 id="transient-å°†ä¸éœ€è¦åºåˆ—åŒ–çš„å±æ€§å‰æ·»åŠ å…³é”®å­—transient-transientè¯¦æƒ…">@Transient å°†ä¸éœ€è¦åºåˆ—åŒ–çš„å±æ€§å‰æ·»åŠ å…³é”®å­—transient <a href="https://blog.csdn.net/rongxiang111/article/details/86476028">@Transientè¯¦æƒ…</a></h5>
<h5 id="embeddable-åµŒå¥—æ˜ å°„">@Embeddable åµŒå¥—æ˜ å°„</h5>
<h5 id="creationtimestamp--æ ¹æ®å½“å‰æ—¶é—´æ¥ç”Ÿæˆé»˜è®¤çš„æ—¶é—´æˆ³insertæ—¶ç”Ÿæˆ">@CreationTimestamp  æ ¹æ®å½“å‰æ—¶é—´æ¥ç”Ÿæˆé»˜è®¤çš„æ—¶é—´æˆ³ï¼ˆinsertæ—¶ç”Ÿæˆï¼‰</h5>
<h5 id="updatetimestamp----æ ¹æ®å½“å‰æ—¶é—´æ¥ç”Ÿæˆé»˜è®¤çš„æ—¶é—´æˆ³updateæ˜¯æ›´æ–°">@UpdateTimestamp    æ ¹æ®å½“å‰æ—¶é—´æ¥ç”Ÿæˆé»˜è®¤çš„æ—¶é—´æˆ³ï¼ˆupdateæ˜¯æ›´æ–°ï¼‰</h5>
<h5 id="inheritance-hibernateç»§æ‰¿ç­–ç•¥æ€»å…±æœ‰ä¸‰ç§single_tabletable_per_class-å’Œ-joined">@Inheritance Hibernateç»§æ‰¿ç­–ç•¥,æ€»å…±æœ‰ä¸‰ç§<a href="https://blog.csdn.net/zhong562748437/article/details/85113555">SINGLE_TABLEã€TABLE_PER_CLASS å’Œ JOINED</a></h5>
<h5 id="id">@id</h5>
<p>å¦‚æœæ˜¯ä¸»é”®idï¼Œè¿˜ä¼šç”¨åˆ°@Idæ³¨è§£</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Idæ³¨é‡ŠæŒ‡å®šè¡¨çš„ä¸»é”®ï¼Œå®ƒå¯ä»¥æœ‰å¤šç§ç”Ÿæˆæ–¹å¼ï¼š
ã€€ã€€1ï¼‰TABLEï¼šå®¹å™¨æŒ‡å®šç”¨åº•å±‚çš„æ•°æ®è¡¨ç¡®ä¿å”¯ä¸€ï¼›
ã€€ã€€2ï¼‰SEQUENCEï¼šä½¿ç”¨æ•°æ®åº“å¾·SEQUENCEåˆ—è±ä¿è¯å”¯ä¸€ï¼ˆOracleæ•°æ®åº“é€šè¿‡åºåˆ—æ¥ç”Ÿæˆå”¯ä¸€IDï¼‰ï¼›
ã€€ã€€3ï¼‰IDENTITYï¼šä½¿ç”¨æ•°æ®åº“çš„IDENTITYåˆ—è±ä¿è¯å”¯ä¸€ï¼›
ã€€ã€€4ï¼‰AUTOï¼šç”±å®¹å™¨æŒ‘é€‰ä¸€ä¸ªåˆé€‚çš„æ–¹å¼æ¥ä¿è¯å”¯ä¸€ï¼›
ã€€ã€€5ï¼‰NONEï¼šå®¹å™¨ä¸è´Ÿè´£ä¸»é”®çš„ç”Ÿæˆï¼Œç”±ç¨‹åºæ¥å®Œæˆã€‚
</code></pre></div></div>

<h5 id="åŒå‘å…³è”æ¨¡å‹">åŒå‘å…³è”æ¨¡å‹</h5>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"address"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AddressEO</span> <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span> <span class="o">{</span>

  <span class="nd">@ManyToOne</span><span class="o">(</span><span class="n">cascade</span> <span class="o">=</span> <span class="o">{</span> <span class="nc">CascadeType</span><span class="o">.</span><span class="na">ALL</span> <span class="o">})</span>
  <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"customer_id"</span><span class="o">)</span><span class="c1">//å¤–é”®å­—æ®µ</span>
  <span class="kd">private</span> <span class="nc">CustomerEO</span> <span class="n">customer</span><span class="o">;</span>

  <span class="c1">// ...</span>
<span class="o">}</span>

<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"customer"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomerEO</span> <span class="o">{</span>

  <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span><span class="o">=</span><span class="s">"customer"</span><span class="o">)</span>
  <span class="kd">private</span> <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">AddressEO</span><span class="o">&gt;</span> <span class="n">addresses</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">AddressEO</span><span class="o">&gt;();</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
<span class="c1">//å…¶ä¸­ï¼Œ@OneToManyæ ‡è®°ä¸­çš„mappedByå±æ€§çš„å€¼ä¸ºAddressEOå®ä½“ä¸­æ‰€å¼•ç”¨çš„CustomerEOå®ä½“çš„å±æ€§å</span>
</code></pre></div></div>

<h4 id="æ€»ç»“">æ€»ç»“</h4>
<ol>
  <li>@Entity  @Table åŒºåˆ«é€šè¿‡ä¸Šé¢åšæ–‡å¯å¾—å‡º</li>
  <li>@Entity  @Table é€šå¸¸åŒæ—¶å‡ºç°</li>
  <li>@MappedSuperclassç±» ç›¸å½“äºæŠŠé€šç”¨å±æ€§æ”¾åœ¨ä¸€èµ·ï¼Œå†è®©ä¹‹ç±»ç»§æ‰¿å®ç°</li>
</ol>

<p>å‚è€ƒé“¾æ¥</p>
<ul>
  <li><a href="https://www.cnblogs.com/gXing/p/8662453.html">hibernateæ³¨è§£@manytooneï¼Œ@onetomany</a></li>
  <li><a href="https://blog.csdn.net/qq_34042441/article/details/80281654">Hibernate å¤šè¡¨å…³è” @ManyToOne</a></li>
  <li><a href="https://www.cnblogs.com/jpfss/p/11059629.html">@JoinColumn è¯¦è§£</a></li>
</ul>
:ET