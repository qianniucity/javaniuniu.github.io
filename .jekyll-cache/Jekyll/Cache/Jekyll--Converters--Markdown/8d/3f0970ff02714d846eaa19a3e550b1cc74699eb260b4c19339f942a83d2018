I"
<h4 id="æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨çš„åŒºåˆ«">æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨çš„åŒºåˆ«</h4>
<p>è¿‡æ»¤å™¨å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œå–ä½ æ‰€æƒ³å–â€ï¼Œå¿½è§†æ‰é‚£äº›ä½ ä¸æƒ³è¦çš„ä¸œè¥¿ï¼›æ‹¦æˆªå™¨å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ‹’ä½ æ‰€æƒ³æ‹’â€ï¼Œå…³å¿ƒä½ æƒ³è¦æ‹’ç»æ‰å“ªäº›ä¸œè¥¿ï¼Œæ¯”å¦‚ä¸€ä¸ªBBSè®ºå›ä¸Šæ‹¦æˆªæ‰æ•æ„Ÿè¯æ±‡ã€‚
1.æ‹¦æˆªå™¨æ˜¯åŸºäºjavaåå°„æœºåˆ¶çš„ï¼Œè€Œè¿‡æ»¤å™¨æ˜¯åŸºäºå‡½æ•°å›è°ƒçš„ã€‚
2.è¿‡æ»¤å™¨ä¾èµ–äºservletå®¹å™¨ï¼Œè€Œæ‹¦æˆªå™¨ä¸ä¾èµ–äºservletå®¹å™¨ã€‚
3.æ‹¦æˆªå™¨åªå¯¹actionèµ·ä½œç”¨ï¼Œè€Œè¿‡æ»¤å™¨å‡ ä¹å¯ä»¥å¯¹æ‰€æœ‰è¯·æ±‚èµ·ä½œç”¨ã€‚
4.æ‹¦æˆªå™¨å¯ä»¥è®¿é—®actionä¸Šä¸‹æ–‡ã€å€¼æ ˆé‡Œçš„å¯¹è±¡ï¼Œè€Œè¿‡æ»¤å™¨ä¸èƒ½ã€‚
5.åœ¨actionçš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œæ‹¦æˆªå™¨å¯ä»¥å¤šèµ·è°ƒç”¨ï¼Œè€Œè¿‡æ»¤å™¨åªèƒ½åœ¨å®¹å™¨åˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ã€‚</p>

<ul>
  <li>addInitParameter æ–¹æ³•ä½¿ç¤ºä¾‹1</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * æ³¨å†Œä¸€ä¸ªStatViewServlet
 * @return
 */</span>
<span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">ServletRegistrationBean</span> <span class="nf">DruidStatViewServle</span><span class="o">()</span> <span class="o">{</span>
	<span class="c1">// org.springframework.boot.context.embedded.ServletRegistrationBeanæä¾›ç±»çš„è¿›è¡Œæ³¨å†Œ.</span>
	<span class="nc">ServletRegistrationBean</span> <span class="n">servletRegistrationBean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServletRegistrationBean</span><span class="o">(</span><span class="k">new</span> <span class="nc">StatViewServlet</span><span class="o">(),</span>
			<span class="s">"/druid/*"</span><span class="o">);</span>
	<span class="c1">// æ·»åŠ åˆå§‹åŒ–å‚æ•°ï¼šinitParams</span>
	<span class="c1">// ç™½åå•ï¼š</span>
	<span class="n">servletRegistrationBean</span><span class="o">.</span><span class="na">addInitParameter</span><span class="o">(</span><span class="s">"allow"</span><span class="o">,</span> <span class="s">"127.0.0.1"</span><span class="o">);</span>
	<span class="c1">// IPé»‘åå• (å­˜åœ¨å…±åŒæ—¶ï¼Œdenyä¼˜å…ˆäºallow) : å¦‚æœæ»¡è¶³denyçš„è¯æç¤º:Sorry, you are not</span>
	<span class="c1">// permitted to view this page.</span>
	<span class="n">servletRegistrationBean</span><span class="o">.</span><span class="na">addInitParameter</span><span class="o">(</span><span class="s">"deny"</span><span class="o">,</span> <span class="s">"192.168.1.73"</span><span class="o">);</span>
	<span class="c1">// ç™»å½•æŸ¥çœ‹ä¿¡æ¯çš„è´¦å·å¯†ç .</span>
	<span class="n">servletRegistrationBean</span><span class="o">.</span><span class="na">addInitParameter</span><span class="o">(</span><span class="s">"loginUsername"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
	<span class="n">servletRegistrationBean</span><span class="o">.</span><span class="na">addInitParameter</span><span class="o">(</span><span class="s">"loginPassword"</span><span class="o">,</span> <span class="s">"123456"</span><span class="o">);</span>
	<span class="c1">// æ˜¯å¦èƒ½å¤Ÿé‡ç½®æ•°æ®.</span>
	<span class="n">servletRegistrationBean</span><span class="o">.</span><span class="na">addInitParameter</span><span class="o">(</span><span class="s">"resetEnable"</span><span class="o">,</span> <span class="s">"true"</span><span class="o">);</span>
	<span class="k">return</span> <span class="n">servletRegistrationBean</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>addInitParameter æ–¹æ³•ä½¿ç¤ºä¾‹2</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * æ³¨å†Œä¸€ä¸ªï¼šfilterRegistrationBean
 * @return
 */</span>
<span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">FilterRegistrationBean</span> <span class="nf">druidStatFilter</span><span class="o">()</span> <span class="o">{</span>
	<span class="nc">FilterRegistrationBean</span> <span class="n">filterRegistrationBean</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FilterRegistrationBean</span><span class="o">(</span><span class="k">new</span> <span class="nc">WebStatFilter</span><span class="o">());</span>
	<span class="c1">// æ·»åŠ è¿‡æ»¤è§„åˆ™.</span>
	<span class="n">filterRegistrationBean</span><span class="o">.</span><span class="na">addUrlPatterns</span><span class="o">(</span><span class="s">"/*"</span><span class="o">);</span>
	<span class="c1">// æ·»åŠ å¿½ç•¥çš„æ ¼å¼ä¿¡æ¯.</span>
	<span class="n">filterRegistrationBean</span><span class="o">.</span><span class="na">addInitParameter</span><span class="o">(</span><span class="s">"exclusions"</span><span class="o">,</span> <span class="s">"*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*"</span><span class="o">);</span>
	<span class="k">return</span> <span class="n">filterRegistrationBean</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>addUrlPatterns æ–¹æ³•ä½¿ç¤ºä¾‹1</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">registration</span><span class="o">.</span><span class="na">addUrlPatterns</span><span class="o">(</span><span class="s">"/*"</span><span class="o">);</span><span class="err">è¿‡æ»¤åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰èµ„æº</span><span class="o">,</span><span class="err">å½“å‰åº”ç”¨ç¨‹åºæ ¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬å¤šçº§å­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ³¨æ„è¿™é‡Œ</span><span class="o">*</span><span class="err">å‰æœ‰â€œ</span><span class="o">/</span><span class="err">â€</span>
  <span class="n">registration</span><span class="o">.</span><span class="na">addUrlPatterns</span><span class="o">(</span><span class="s">".html"</span><span class="o">);</span><span class="err">è¿‡æ»¤æŒ‡å®šçš„ç±»å‹æ–‡ä»¶èµ„æº</span><span class="o">,</span> <span class="err">å½“å‰åº”ç”¨ç¨‹åºæ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰</span><span class="n">html</span><span class="err">æ–‡ä»¶ï¼Œæ³¨æ„ï¼š</span><span class="o">*.</span><span class="na">html</span><span class="err">å‰æ²¡æœ‰â€œ</span><span class="o">/</span><span class="err">â€</span><span class="o">,</span><span class="err">å¦åˆ™é”™è¯¯</span>
  <span class="n">registration</span><span class="o">.</span><span class="na">addUrlPatterns</span><span class="o">(</span><span class="s">"/folder_name/*"</span><span class="o">);</span><span class="err">è¿‡æ»¤æŒ‡å®šçš„ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span><span class="o">,</span><span class="err">å½“å‰åº”ç”¨ç¨‹åºæ ¹ç›®å½•ä¸‹çš„</span><span class="n">folder_name</span><span class="err">å­ç›®å½•ï¼ˆå¯ä»¥æ˜¯å¤šçº§å­ç›®å½•ï¼‰ä¸‹æ‰€æœ‰æ–‡ä»¶</span>
  <span class="n">registration</span><span class="o">.</span><span class="na">addUrlPatterns</span><span class="o">(</span><span class="s">"/index.html"</span><span class="o">);</span><span class="err">è¿‡æ»¤æŒ‡å®šæ–‡ä»¶</span>
</code></pre></div></div>
:ET