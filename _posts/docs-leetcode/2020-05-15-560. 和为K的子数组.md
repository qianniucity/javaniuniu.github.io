---
title: 560. å’Œä¸ºKçš„å­æ•°ç»„
permalink: /leetcode/2020/0515/006
tags: leetcode å‰ç¼€å’Œ å“ˆå¸Œè¡¨
key: leetcode-2020-0515-006
---
- __éš¾åº¦__ï¼š`ä¸­ç­‰`{:.warning}
- __æœ¬é¢˜æ¶‰åŠç®—æ³•__ï¼š `å‰ç¼€å’Œ`{:.success} `å“ˆå¸Œè¡¨`{:.success}
- __æ€è·¯__ï¼š  `å‰ç¼€å’Œ`{:.info} `å“ˆå¸Œè¡¨`{:.info}
- __ç±»ä¼¼é¢˜å‹__:

---

### é¢˜ç›® [560. å’Œä¸ºKçš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarray-sum-equals-k/)
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°Â `k`ï¼Œä½ éœ€è¦æ‰¾åˆ°è¯¥æ•°ç»„ä¸­å’Œä¸ºÂ `k`Â çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚

### ç¤ºä¾‹ 1 :
```
è¾“å…¥:nums = [1,1,1], k = 2
è¾“å‡º: 2 , [1,1] ä¸ [1,1] ä¸ºä¸¤ç§ä¸åŒçš„æƒ…å†µã€‚
```
#### è¯´æ˜ :
```
æ•°ç»„çš„é•¿åº¦ä¸º [1, 20,000]ã€‚
æ•°ç»„ä¸­å…ƒç´ çš„èŒƒå›´æ˜¯ [-1000, 1000] ï¼Œä¸”æ•´æ•°Â kÂ çš„èŒƒå›´æ˜¯Â [-1e7, 1e7]ã€‚
```

### æ–¹æ³•ä¸€ å‰ç¼€å’Œ
#### è§£é¢˜æ€è·¯
- __é¢˜ç›®ç†è§£__ï¼š
  - åœ¨æ•°ç»„ `nums` ä¸­æ‰¾åˆ°è¿ç»­å­æ•°ç»„å’Œä¸º `k`ï¼Œå¹¶è¿”å›å­æ•°ç»„ä¸ªæ•°
  - æˆ‘ä»¬å‡è®¾ ä»å·¦åˆ°å³ å‰ç¼€å’Œä¸º `preSum[0]preSum[0]...preSum[i+1]`
  - æˆ‘ä»¬å†æ ¹æ®ä¸‹é¢çš„ __å‰ç¼€å’Œæ¨å€’è¿‡ç¨‹__ ï¼Œå¯ä»¥å¾—åˆ°ä»»æ„è¿ç»­å­æ•°ç»„å’Œ
  - åªè¦ $preSum[right+1] - preSum[left] = k$ å³å¯å¾—åˆ°ç»“æœ

- __å‰ç¼€å’Œæ¨å€’è¿‡ç¨‹__ï¼š
```
preSum[0] = 0
preSum[1] = num[0] = preSum[0] + nums[0]
preSum[2] = num[0] + num[1] = preSum[1] + nums[1]
preSum[3] = num[0] + num[1] + nums[2] = preSum[2] + nums[2]
.
.
preSum[i+1] = num[0] + num[1] ... + nums[i] = preSum[i] + nums[i]
```

- __å¤æ‚åº¦åˆ†æ__ï¼š
  - æ—¶é—´å¤æ‚åº¦ $O(N^2)$ ï¼šå‡è®¾æ•°ç»„é•¿åº¦ä¸º `n` ï¼Œéå†ä¸¤æ¬¡ ï¼›
  - ç©ºé—´å¤æ‚åº¦ $O(N+1)$ ï¼šå‡è®¾æ•°ç»„é•¿åº¦ä¸º `n`ï¼Œå…¶ä¸­ `preSum[0]` ä¸ºå‰ç¼€åˆå§‹å€¼ã€‚

#### java
```java
class Solution {
    public int subarraySum(int[] nums, int k) {
        int len = nums.length;
        // è®¡ç®—å‰ç¼€å’Œæ•°ç»„
        int[] preSum = new int[len + 1];
        preSum[0] = 0;
        for (int i = 0; i < len; i++) {
            preSum[i + 1] = preSum[i] + nums[i];
        }
        int count = 0;
        for (int left = 0; left < len; left++) {
            for (int right = left; right < len; right++) {
                // åŒºé—´å’Œ [left..right]ï¼Œæ³¨æ„ä¸‹æ ‡åç§»
                if (preSum[right + 1] - preSum[left] == k) {
                    count++;
                }
            }
        }
        return count;
    }
}
```

#### python
```python
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        nums_len = len(nums)
        pre_sum = [0] * (nums_len+1)
        count = 0
        for i,num in enumerate(nums):
            pre_sum[i+1] = pre_sum[i] + num
        for left in range(len(nums)):
            for right in range(left,len(nums)):
                if pre_sum[right+1] - pre_sum[left] == k:
                    count += 1
        return count
```

### æ–¹æ³•äºŒ å‰ç¼€å’Œ + å“ˆå¸Œè¡¨
- è¿˜æ˜¯å‰ç¼€å’Œçš„æ€æƒ³ï¼Œæˆ‘ä»¬æŠŠå‰ç¼€å’Œæ”¾åœ¨ `map` ä¸­ï¼Œ `map.put(preSum,å‰ç¼€å’Œå‡ºç°æ¬¡æ•°)` (æ•°ç»„ä¸­å¯èƒ½ä¼šæœ‰è´Ÿæ•°ï¼Œæ‰€ä»¥å¯èƒ½ä¼šé‡å¤å‡ºç°)

#### java
```java
public int subarraySum(int[] nums, int k) {
        int count = 0;
        // key:å‰iä¸ªå…ƒç´ çš„å’Œï¼Œvalueï¼šå¯¹åº”key å‡ºç°çš„ä¸ªæ•°
        Map<Integer,Integer> preSumMap = new HashMap<>();
        // æ•°ç»„ä¸‹æ ‡ä¸º 0ï¼Œåˆ™å‰é¢æ•°ç»„ä¸ºç©ºï¼Œæ‰€ä»¥å’Œä¸º 0ï¼Œä¸”å‡ºç°ä¸€æ¬¡  
        preSumMap.put(0, 1);
        int preSum = 0;
        for(int i = 0;i<nums.length;i++) {
            preSum += nums[i];
            if (preSumMap.containsKey(preSum-k)){
                count += preSumMap.get(preSum-k);
            }
            preSumMap.put(preSum, preSumMap.getOrDefault(nums[i], 0)+1);
        }

        return count;
    }
```

#### python
```python
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        pre_sum = 0
        count = 0
        pre_sum_dict = collections.defaultdict(int)
        pre_sum_dict[0] = 1
        for num in nums:
            pre_sum += num
            if pre_sum - k in pre_sum_dict:
                count += pre_sum_dict.get(pre_sum - k)
            pre_sum_dict[pre_sum] +=  1
        return count
```

- __å¤æ‚åº¦åˆ†æ__ï¼š
  - æ—¶é—´å¤æ‚åº¦ $O(N)$ ï¼šå‡è®¾æ•°ç»„é•¿åº¦ä¸º `n` ï¼Œæˆ‘ä»¬éå†æ•°ç»„é•¿åº¦ä¸º `n`
  - ç©ºé—´å¤æ‚åº¦ $O(N)$ ï¼šå‡è®¾æ•°ç»„é•¿åº¦ä¸º `n`ï¼Œå“ˆå¸Œè¡¨åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œä¿å­˜ `n` ä¸ªä¸åŒå…ƒç´ 


- __å¦‚æœä½ è§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµğŸ‘æ”¯æŒ__
- __å¦‚æœæœ‰ç–‘æƒ‘æˆ–è€…è¡¨è¾¾ä¸åˆ°ä½çš„é¢åœ°æ–¹ ï¼Œè¯·åœ¨ä¸‹é¢ğŸ‘‡è¯„è®ºåŒºæŒ‡å‡º__
